<a href="{{ url_for('book.view', id=book.id) }}" style="text-decoration: none;">
    <div class="card" style="width: 18rem; position: relative; overflow: hidden;">
        
        <!-- Fondo difuminado -->
        {% if book.cover_url %} 
            <!-- Sin este if horrible, salta error por todos lados porque el interprete 
            no entiende que hay un operador ternario en background:image -->
            <div class="card-background" style="
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image: url({{book.cover_url}});
                background-size: cover;
                background-position: center;
                filter: blur(10px);
                opacity: 0.5;
                z-index: 0;
            ">
            </div>
        {% else %}
            <div class="card-background" style="
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-image: url('https://placehold.co/400x600');
                background-size: cover;
                background-position: center;
                filter: blur(10px);
                opacity: 0.5;
                z-index: 0;
            ">
            </div>
        {% endif %}

        <!-- Contenido de la card -->
        <div class="row g-0" style="position: relative; z-index: 1;">
            <div class="col-md-4">
                <img src="{{ book.cover_url or 'https://placehold.co/400x600' }}" 
                    class="img-fluid rounded-start"
                    alt="..."
                >
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h6 class="card-title">{{ book.title[:40] }}</h6>
                    <p class="card-text"><small class="text-body-secondary">{{ book.author.name }}</small></p>
                </div>
            </div>
        </div>
    </div>
</a>

<style>
    .card {
        transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.3s ease;
        background-color: rgba(255, 255, 255, 0.9) !important;
    }

    .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
    }

    .card:hover .card-background {
        opacity: 0.4;
    }
</style>